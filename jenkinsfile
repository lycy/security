#!groovy

node {
   stage('checkout') {
    git branch: "${BRANCH_NAME}", url: 'https://github.com/lycy/security.git'

   }
   stage('build') {
      // Run the maven build
      if (isUnix()) {
         sh "mvn clean package -DskipTests"
      } else {
         bat(/mvn clean package -DskipTests/)
      }
   }
   stage('deploy') {
      if (isUnix()) {
         sh "mvn clean package -DskipTests"  // 更改
      } else {
         bat(/del D:\tool\service\tomcat1\apache-tomcat-8.0.32\webapps\security.war/)
         bat(/xcopy C:\Users\zhiyuan\.jenkins\workspace\pipleTest\target\security.war D:\tool\service\tomcat1\apache-tomcat-8.0.32\webapps/)
      }
   }
}
