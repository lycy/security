#!groovy

node {
   stage('checkout') {
    git branch: "${BRANCH_NAME}", url: 'https://github.com/lycy/security.git'

   }
   stage('build') {
      // Run the maven build
      if (isUnix()) {
         sh "mvn clean package -DskipTests"
      } else {
         bat "mvn clean package -DskipTests/"
      }
   }

   stage('deploy') {
       sh "rm -rf /usr/local/tool/apache-tomcat-8.5.16/webapps/security.war"
       sh "mv  /root/.jenkins/workspace/test-pipeline/target/security.war  /usr/local/tool/apache-tomcat-8.5.16/webapps/"
   }
}
